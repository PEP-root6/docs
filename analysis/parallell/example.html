
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Posix multithreading Â· PEP root6 workshop</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-block-align/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../css/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="caveats.html" />
    
    
    <link rel="prev" href="intro.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction.html">
            
                <a href="../introduction.html">
            
                    
                    Part 1 - Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../feat1.html">
            
                <a href="../feat1.html">
            
                    
                    Part 2 - New C++ features 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../feat2.html">
            
                <a href="../feat2.html">
            
                    
                    Part 3 - Smart (and dumb) pointers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../newf2/intro.html">
            
                <a href="../newf2/intro.html">
            
                    
                    Pointers, the absolute basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../newf2/smartp.html">
            
                <a href="../newf2/smartp.html">
            
                    
                    Smart pointers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../parallellism.html">
            
                <a href="../parallellism.html">
            
                    
                    Part 4 - Parallellism
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="intro.html">
            
                <a href="intro.html">
            
                    
                    Threads and processes
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.2" data-path="example.html">
            
                <a href="example.html">
            
                    
                    Posix multithreading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="caveats.html">
            
                <a href="caveats.html">
            
                    
                    What can go wrong?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="root.html">
            
                <a href="root.html">
            
                    
                    Parallellism with ROOT
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../changes.html">
            
                <a href="../changes.html">
            
                    
                    Part 5 - 5 to 6: changes to user code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../vectorization.html">
            
                <a href="../vectorization.html">
            
                    
                    Part 6 - Vectorization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../declarative.html">
            
                <a href="../declarative.html">
            
                    
                    Part 7 - Declarative analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../python/">
            
                <a href="../python/">
            
                    
                    Part 8 - Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../python/running.html">
            
                <a href="../python/running.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../python/operators.html">
            
                <a href="../python/operators.html">
            
                    
                    Objects and operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../python/numbers.html">
            
                <a href="../python/numbers.html">
            
                    
                    Numbers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../python/strings.html">
            
                <a href="../python/strings.html">
            
                    
                    Strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../python/lists.html">
            
                <a href="../python/lists.html">
            
                    
                    Lists and looping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../python/dictionaries.html">
            
                <a href="../python/dictionaries.html">
            
                    
                    Dictionaries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../python/conditions.html">
            
                <a href="../python/conditions.html">
            
                    
                    Conditions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../python/methods.html">
            
                <a href="../python/methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../python/scripting.html">
            
                <a href="../python/scripting.html">
            
                    
                    Scripting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../python/modules.html">
            
                <a href="../python/modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="../python/learning.html">
            
                <a href="../python/learning.html">
            
                    
                    Learning more
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="../python/pyroot.html">
            
                <a href="../python/pyroot.html">
            
                    
                    PyROOT
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../bestprac/best_prac.html">
            
                <a href="../bestprac/best_prac.html">
            
                    
                    Part 9 - Best Practices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../bestprac/preparing.html">
            
                <a href="../bestprac/preparing.html">
            
                    
                    Preparing your code for debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../bestprac/general.html">
            
                <a href="../bestprac/general.html">
            
                    
                    Some general programming tips
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../bestprac/crash.html">
            
                <a href="../bestprac/crash.html">
            
                    
                    Where does my code crash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../bestprac/memory.html">
            
                <a href="../bestprac/memory.html">
            
                    
                    Finding memory leaks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Posix multithreading</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="c-multithreading">C++ Multithreading</h1>
<p>Multithreading is a specialized form of multitasking and a multitasking is the feature that allows your computer to run two or more programs concurrently. In general, there are two types of multitasking: process-based and thread-based.</p>
<p>Process-based multitasking handles the concurrent execution of programs. Thread-based multitasking deals with the concurrent execution of pieces of the same program.</p>
<p>A multithreaded program contains two or more parts that can run concurrently. Each part of such a program is called a thread, and each thread defines a separate path of execution.</p>
<p>C++ does not contain any built-in support for multithreaded applications. Instead, it relies entirely upon the operating system to provide this feature.</p>
<p>This tutorial assumes that you are working on Linux OS and we are going to write multi-threaded C++ program using POSIX. POSIX Threads, or Pthreads provides API which are available on many Unix-like POSIX systems such as FreeBSD, NetBSD, GNU/Linux, Mac OS X and Solaris.</p>
<h2 id="creating-threads">Creating threads</h2>
<p>The following routine is used to create a POSIX thread</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>
pthread_create (thread, attr, start_routine, arg)
</code></pre>
<p>Here, pthread_create creates a new thread and makes it executable. This routine can be called any number of times from anywhere within your code. Here is the description of the parameters &#x2212;</p>
<ul>
<li>thread: An opaque, unique identifier for the new thread returned by the subroutine.</li>
<li>attr: An opaque attribute object that may be used to set thread attributes. You can specify a thread attributes object, or NULL for the default values.     </li>
<li>start_routine: the C++ routine that the thread will execute once it is created</li>
<li>arg: A single argument that may be passed to start_routine. It must be passed by reference as a pointer cast of type void. NULL may be used if no argument is to be passed</li>
</ul>
<p>The maximum number of threads that may be created by a process is implementation dependent. Once created, threads are peers, and may create other threads. There is no implied hierarchy or dependency between threads.</p>
<h2 id="terminating-threads">Terminating Threads</h2>
<p>There is following routine which we use to terminate a POSIX thread &#x2212;</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>
pthread_exit (status)
</code></pre>
<p>Here pthread_exit is used to explicitly exit a thread. Typically, the pthread_exit() routine is called after a thread has completed its work and is no longer required to exist.</p>
<p>If main() finishes before the threads it has created, and exits with pthread_exit(), the other threads will continue to execute. Otherwise, they will be automatically terminated when main() finishes.</p>
<h2 id="example">Example</h2>
<p>Example</p>
<p>This simple example code creates 5 threads with the pthread_create() routine. Each thread prints a &quot;Hello World!&quot; message, and then terminates with a call to pthread_exit(). </p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NUM_THREADS 5</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">PrintHello</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *threadid)</span> </span>{
   <span class="hljs-keyword">long</span> tid;
   tid = (<span class="hljs-keyword">long</span>)threadid;
   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Hello World! Thread ID, &quot;</span> &lt;&lt; tid &lt;&lt; <span class="hljs-built_in">endl</span>;
   pthread_exit(<span class="hljs-literal">NULL</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span> </span>{
   <span class="hljs-keyword">pthread_t</span> threads[NUM_THREADS];
   <span class="hljs-keyword">int</span> rc;
   <span class="hljs-keyword">int</span> i;

   <span class="hljs-keyword">for</span>( i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; i++ ) {
      <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;main() : creating thread, &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-built_in">endl</span>;
      rc = pthread_create(&amp;threads[i], <span class="hljs-literal">NULL</span>, PrintHello, (<span class="hljs-keyword">void</span> *)i);

      <span class="hljs-keyword">if</span> (rc) {
         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Error:unable to create thread,&quot;</span> &lt;&lt; rc &lt;&lt; <span class="hljs-built_in">endl</span>;
         <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);
      }
   }
   pthread_exit(<span class="hljs-literal">NULL</span>);
}
</code></pre>
<p>Compile the following program using -lpthread library as follows </p>
<pre><code class="lang-cpp">$gcc test.cpp -lpthread
</code></pre>
<p>Now, execute your program which gives the following output</p>
<pre><code class="lang-cpp">main() : creating thread, <span class="hljs-number">0</span>
main() : creating thread, <span class="hljs-number">1</span>
main() : creating thread, <span class="hljs-number">2</span>
main() : creating thread, <span class="hljs-number">3</span>
main() : creating thread, <span class="hljs-number">4</span>
Hello World! Thread ID, <span class="hljs-number">0</span>
Hello World! Thread ID, <span class="hljs-number">1</span>
Hello World! Thread ID, <span class="hljs-number">2</span>
Hello World! Thread ID, <span class="hljs-number">3</span>
Hello World! Thread ID, <span class="hljs-number">4</span>
</code></pre>
<h2 id="passing-arguments-to-threads">Passing Arguments to Threads</h2>
<p>This example shows how to pass multiple arguments via a structure. You can pass any data type in a thread callback because it points to void as explained in the following example</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NUM_THREADS 5</span>

<span class="hljs-keyword">struct</span> thread_data {
   <span class="hljs-keyword">int</span>  thread_id;
   <span class="hljs-keyword">char</span> *message;
};

<span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">PrintHello</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *threadarg)</span> </span>{
   <span class="hljs-keyword">struct</span> thread_data *my_data;
   my_data = (<span class="hljs-keyword">struct</span> thread_data *) threadarg;

   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Thread ID : &quot;</span> &lt;&lt; my_data-&gt;thread_id ;
   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot; Message : &quot;</span> &lt;&lt; my_data-&gt;message &lt;&lt; <span class="hljs-built_in">endl</span>;

   pthread_exit(<span class="hljs-literal">NULL</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span> </span>{
   <span class="hljs-keyword">pthread_t</span> threads[NUM_THREADS];
   <span class="hljs-keyword">struct</span> thread_data td[NUM_THREADS];
   <span class="hljs-keyword">int</span> rc;
   <span class="hljs-keyword">int</span> i;

   <span class="hljs-keyword">for</span>( i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; i++ ) {
      <span class="hljs-built_in">cout</span> &lt;&lt;<span class="hljs-string">&quot;main() : creating thread, &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-built_in">endl</span>;
      td[i].thread_id = i;
      td[i].message = <span class="hljs-string">&quot;This is message&quot;</span>;
      rc = pthread_create(&amp;threads[i], <span class="hljs-literal">NULL</span>, PrintHello, (<span class="hljs-keyword">void</span> *)&amp;td[i]);

      <span class="hljs-keyword">if</span> (rc) {
         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Error:unable to create thread,&quot;</span> &lt;&lt; rc &lt;&lt; <span class="hljs-built_in">endl</span>;
         <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);
      }
   }
   pthread_exit(<span class="hljs-literal">NULL</span>);
}
</code></pre>
<p>When the above code is compiled and executed, it produces the following result &#x2212;</p>
<pre><code class="lang-cpp">main() : creating thread, <span class="hljs-number">0</span>
main() : creating thread, <span class="hljs-number">1</span>
main() : creating thread, <span class="hljs-number">2</span>
main() : creating thread, <span class="hljs-number">3</span>
main() : creating thread, <span class="hljs-number">4</span>
Thread ID : <span class="hljs-number">3</span> Message : This is message
Thread ID : <span class="hljs-number">2</span> Message : This is message
Thread ID : <span class="hljs-number">0</span> Message : This is message
Thread ID : <span class="hljs-number">1</span> Message : This is message
Thread ID : <span class="hljs-number">4</span> Message : This is message
</code></pre>
<h2 id="joining-and-detaching-threads">Joining and Detaching Threads</h2>
<p>There are following two routines which we can use to join or detach threads</p>
<pre><code class="lang-cpp">pthread_join (threadid, status) 
pthread_detach (threadid)
</code></pre>
<p>The pthread_join() subroutine blocks the calling thread until the specified threadid thread terminates. When a thread is created, one of its attributes defines whether it is joinable or detached. Only threads that are created as joinable can be joined. If a thread is created as detached, it can never be joined.</p>
<p>This example demonstrates how to wait for thread completions by using the Pthread join routine.</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> NUM_THREADS 5</span>

<span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">wait</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *t)</span> </span>{
   <span class="hljs-keyword">int</span> i;
   <span class="hljs-keyword">long</span> tid;

   tid = (<span class="hljs-keyword">long</span>)t;

   sleep(<span class="hljs-number">1</span>);
   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Sleeping in thread &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Thread with id : &quot;</span> &lt;&lt; tid &lt;&lt; <span class="hljs-string">&quot;  ...exiting &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
   pthread_exit(<span class="hljs-literal">NULL</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span> </span>{
   <span class="hljs-keyword">int</span> rc;
   <span class="hljs-keyword">int</span> i;
   <span class="hljs-keyword">pthread_t</span> threads[NUM_THREADS];
   <span class="hljs-keyword">pthread_attr_t</span> attr;
   <span class="hljs-keyword">void</span> *status;

   <span class="hljs-comment">// Initialize and set thread joinable</span>
   pthread_attr_init(&amp;attr);
   pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_JOINABLE);

   <span class="hljs-keyword">for</span>( i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; i++ ) {
      <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;main() : creating thread, &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-built_in">endl</span>;
      rc = pthread_create(&amp;threads[i], attr, wait, (<span class="hljs-keyword">void</span> *)i );

      <span class="hljs-keyword">if</span> (rc) {
         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Error:unable to create thread,&quot;</span> &lt;&lt; rc &lt;&lt; <span class="hljs-built_in">endl</span>;
         <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);
      }
   }

   <span class="hljs-comment">// free attribute and wait for the other threads</span>
   pthread_attr_destroy(&amp;attr);
   <span class="hljs-keyword">for</span>( i = <span class="hljs-number">0</span>; i &lt; NUM_THREADS; i++ ) {
      rc = pthread_join(threads[i], &amp;status);
      <span class="hljs-keyword">if</span> (rc) {
         <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Error:unable to join,&quot;</span> &lt;&lt; rc &lt;&lt; <span class="hljs-built_in">endl</span>;
         <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);
      }

      <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Main: completed thread id :&quot;</span> &lt;&lt; i ;
      <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;  exiting with status :&quot;</span> &lt;&lt; status &lt;&lt; <span class="hljs-built_in">endl</span>;
   }

   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Main: program exiting.&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
   pthread_exit(<span class="hljs-literal">NULL</span>);
}
</code></pre>
<p>When the above code is compiled and executed, it produces the following result &#x2212;</p>
<pre><code class="lang-cpp">main() : creating thread, <span class="hljs-number">0</span>
main() : creating thread, <span class="hljs-number">1</span>
main() : creating thread, <span class="hljs-number">2</span>
main() : creating thread, <span class="hljs-number">3</span>
main() : creating thread, <span class="hljs-number">4</span>
Sleeping in thread
Thread with id : <span class="hljs-number">0</span> .... exiting
Sleeping in thread
Thread with id : <span class="hljs-number">1</span> .... exiting
Sleeping in thread
Thread with id : <span class="hljs-number">2</span> .... exiting
Sleeping in thread
Thread with id : <span class="hljs-number">3</span> .... exiting
Sleeping in thread
Thread with id : <span class="hljs-number">4</span> .... exiting
Main: completed thread id :<span class="hljs-number">0</span>  exiting with status :<span class="hljs-number">0</span>
Main: completed thread id :<span class="hljs-number">1</span>  exiting with status :<span class="hljs-number">0</span>
Main: completed thread id :<span class="hljs-number">2</span>  exiting with status :<span class="hljs-number">0</span>
Main: completed thread id :<span class="hljs-number">3</span>  exiting with status :<span class="hljs-number">0</span>
Main: completed thread id :<span class="hljs-number">4</span>  exiting with status :<span class="hljs-number">0</span>
Main: program exiting.
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="intro.html" class="navigation navigation-prev " aria-label="Previous page: Threads and processes">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="caveats.html" class="navigation navigation-next " aria-label="Next page: What can go wrong?">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Posix multithreading","level":"1.5.2","depth":2,"next":{"title":"What can go wrong?","level":"1.5.3","depth":2,"path":"analysis/parallell/caveats.md","ref":"analysis/parallell/caveats.md","articles":[]},"previous":{"title":"Threads and processes","level":"1.5.1","depth":2,"path":"analysis/parallell/intro.md","ref":"analysis/parallell/intro.md","articles":[]},"dir":"ltr"},"config":{"plugins":["katex","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#117012fdc18c96831cb88196980c0ea73b0c87b8","collapsible-menu","block-align"],"styles":{"website":"css/website.css"},"pluginsConfig":{"collapsible-menu":{},"block-align":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"PEP root6 workshop","gitbook":"*","description":"PEP root6 introduction material"},"file":{"path":"analysis/parallell/example.md","mtime":"2018-11-11T13:49:11.629Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-11-11T13:49:45.336Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

